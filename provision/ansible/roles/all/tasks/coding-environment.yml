---
- name: Install git
  become: true
  ansible.builtin.apt:
    name:
      - git
      - openssh-client
      - shellcheck
      - tig
    state: present
    update_cache: true

- name: Configure git email
  community.general.git_config:
    name: user.email
    scope: global
    value: "{{ git_email }}"
- name: Configure git name
  community.general.git_config:
    name: user.name
    scope: global
    value: "{{ git_name }}"
- name: Configure git autocrlf
  community.general.git_config:
    name: core.autocrlf
    scope: global
    value: input
- name: Configure git eol
  community.general.git_config:
    name: core.eol
    scope: global
    value: lf
- name: Configure git comment char
  community.general.git_config:
    name: core.commentChar
    scope: global
    value: ;
- name: Configure git push default
  community.general.git_config:
    name: push.default
    scope: global
    value: current
- name: Configure git default branch
  community.general.git_config:
    name: init.defaultBranch
    scope: global
    value: main
- name: Configure git prune on fetch
  community.general.git_config:
    name: fetch.prune
    scope: global
    value: true
- name: Configure git pull strategy
  community.general.git_config:
    name: pull.rebase
    scope: global
    value: false
- name: Configure git follow tags
  community.general.git_config:
    name: push.followTags
    scope: global
    value: true
